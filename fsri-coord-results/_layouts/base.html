<!doctype html>
<html>

<head>
    <title>{{site.title}} - {{ page.title }}</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="{{ page.keywords | default: site.default_keywords }}" />
    <meta name="description" content="{{ page.excerpt | newline_to_br | strip_newlines | replace: '<br />', ' ' | strip_html | strip | default: 'UL Firefighter Safety Research Institute' }}"/>
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700,700i,800" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="{% asset_path 'FSRI_GraphicShield.png' %}">
    {% include analytics.html %}

    {% include favicon.html %}

    {% if page.js_vars %}
        <script type="text/javascript">
        {% for v in page.js_vars %}
            var {{ v.name }} = '{{ v.value }}';
        {% endfor %}
        </script>
    {% endif %}

    {% if page.render_auth_vars %}
    <script type="text/javascript">
        var userPoolId = "{{ site.cognito.userPoolId }}";
        var identityPoolId = "{{ site.cognito.identityPoolId }}";
        var cognitoRegionUrl = "{{ site.cognito.cognitoRegionUrl }}";
        var clientId = "{{ site.cognito.clientId }}";
        var loginApiUrl = "{{ site.cognito.loginApiUrl}}";
    </script>
    {% endif %}

    <script type="text/javascript">
        var logoutApiUrl = "{{ site.cognito.logoutApiUrl }}";
    </script>

    {% if page.external_js %}
        {% for j in page.external_js %}
            <script src='{{ j }}' type="text/javascript"></script>
        {% endfor %}
    {% endif %}

    {% css base %}

    {% if page.custom_css %}
        {% for ss in page.custom_css %}
            <link rel="stylesheet" href="{{ ss | asset_path }}"/>
        {% endfor %}
    {% endif %}
</head>

<body display="flex" layout="column">
    {% include nav.html %}
    {% if page.breadcrumbs %}
    {% include breadcrumbs.html %}
    {% endif %}

    {% if page.contained %}
    <div class="container" flex>
        {{ content }}
    </div>
    {% else %}
        {{ content }}
    {% endif %}

    {% include footer.html %}
</body>

<script type="text/javascript">
    var assetPath = '/assets/';
    var assets = {
        images: [
            {% for asset in assets %}
                {% assign path = asset[0] | downcase %}
                {% unless path contains 'thumbnails' %}
                    {% assign pathParts = path | split: '/' %}
                    {% if pathParts[0] != 'lib' %}
                        {% assign path_lowercase = path | downcase %}
                        {% if path_lowercase contains '.png' or path_lowercase contains '.jpg' or path_lowercase contains '.jpeg' or path_lowercase contains '.gif' %}
                            '{{ asset[0] | asset_path }}',
                        {% endif %}
                    {% endif %}
                {% endunless %}
            {% endfor %}
        ]
    };
</script>

{% js vendor %}
{% js app %}
{% if page.custom_js %}
    {% for j in page.custom_js %}
        <script type="text/javascript" src="{{ j | asset_path }}"></script>
    {% endfor %}
{% endif %}
{{ page.blah }}
</html>
